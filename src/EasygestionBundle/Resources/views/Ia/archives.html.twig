{% extends "::base.html.twig" %}

{% block body %}
    
    {# Retour #}
    <div>
        <a href="{{ path('homepage') }}">Retour</a>
        <h2>{{ app.user.initials | upper }}</h2>
    </div>
    
    <br />
    <div>
        <ul class="nav nav-tabs">
            <li class="active">
                <a href="#besoins_en_cours">Besoins en cours</a>
            </li>
            <li>
                <a href="#besoins_archives">Besoins archivés</a>
            </li>
            <li>
                <a href="#clients" >Les clients</a>
            </li>
            <li>
                <a href="{{ path('fos_user_profile_show') }}">Mon profil</a>
            </li>
        </ul>
    </div>
    
    
    <!-- Tab panes -->
    <div class="tab-content">
        <div class="tab-pane fade in active" id="besoins_en_cours">
            
            <br />
            
            <div>
                <a href="{{ path('besoin_new') }}" class="btn btn-success glyphicon glyphicon-plus"></a>
            </div>

            <br />

            <div>
                {{ sg_datatables_render(datatable) }}
            </div>  

        </div>
        <div class="tab-pane fade" id="besoins_archives">
            
            
            <div>
                {{ sg_datatables_render(datatable) }}
            </div>
            
            <form>
                    <table class="table table-striped table-hover">
                        <thead>
                            <tr>
                                <th>Status</th>
                                <th>Date de création</th>
                                <th>Client</th>
                                <th>Métier</th>
                                <th>Description</th>
                                <th>T0</th>
                                <th>Durée</th>
                                <th>Profil</th>
                                <th>Solution</th>
                            </tr>
                        </thead>
                        <tbody>
                            {% for a in archive %}
                                <tr>
                                    <td>{{ a.status }}</td>
                                    <td>{{ a.dateCreation|date('d-m-y') }}</td>
                                    <td>{{ a.client.name }}</td>
                                    <td>{{ a.workType }}</td>
                                    <td>{{ a.description }}</td>
                                    <td>{{ a.start|date('d-m-y') }}</td>
                                    <td>{{ a.duration }}</td>
                                    <td>{{ a.id }}</td>
                                    <td>{{ a.solution }}</td>
                                </tr>
                            {% endfor %}
                        </tbody>
                    </table>
                </form>
        </div>
        <div class="tab-pane fade" id="clients">
                
            <br />

            <div>
                <a href="#" class="btn btn-success glyphicon glyphicon-plus"
       data-toggle="modal" data-target="#add-client"></a>
            </div>

            <br />

            <form>
                <table class="table table-striped table-hover">
                    <thead>
                        <tr>
                            <th>ID</th>
                            <th>Name</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% for c in clients %}
                            <tr>
                                <td>{{ c.id }}</td>
                                <td>{{ c.name }}</td>
                                {#<td>
                                    <a href="{{ path('client_remove', {'id': c.id}) }}" class="btn glyphicon glyphicon-trash"></a> 
                                </td>#}
                            </tr>
                        {% endfor %}
                    </tbody>
                </table>
            </form>
        </div>
    </div>

                            
{# ----------------------- Formulaire ADD / Remove -------------------------- #}
{# A factoriser  modif css #}
    <div class="modal fade" id="add-client" tabindex="-1" role="dialog" 
        aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="loginmodal-container">
                <h1>Nouveau client</h1><br>
               {{ form_start(form , {'attr': {'class': 'form-horizontal'} }) }}  
                    {{ form_widget(form) }}
                    <input type="submit" value="Créer" class="btn btn-default pull-right" />
                {{ form_end(form) }}    
            </div>
        </div>
    </div>
{# -------------------------------------------------------------------------- #}   

    
   
    
{# Script #}   
<script>
    $(document).ready(function(){
        $(".nav-tabs a").click(function(){
            $(this).tab('show');
        });
    });
</script>
{% endblock %}

