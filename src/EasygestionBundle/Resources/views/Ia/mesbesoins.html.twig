{% extends "::layout/layout.html.twig" %}

{% block body %}
<div class="container">
    {# Message #}
    <div class="row">
        {{ app.request.get('msg') }}
    </div>
    
    {# Retour #}
    <div class="row">
        <a href="{{ path('easygestion_ia') }}">Retour</a>
    </div>
    
    <div class="row">
        <h1>{{ ia.initials | upper }} - <strong>Mes Besoins</strong></h1>
    </div>
    
    <div class="row">   
        {# Add besoin #}
        <a href="{{ path('easygestion_mesbesoins_add') }}" class="btn btn-success glyphicon glyphicon-plus"
           data-toggle="modal" data-target="{{ path('easygestion_mesbesoins_add') }}">
        </a>
        {# Remove besoin #}
        <a href="#" class="btn btn-danger glyphicon glyphicon-minus"
           data-toggle="modal" data-target="#remove-besoin">
        </a>    
    </div>

{#------------------------------- Message ----------------------------------- #}
{#    {% if msg %}
         <p class="control-group success">{{ msg }}</p>
    {% endif %} #}
{# -------------------------------------------------------------------------- #}

{# ----------------------- Formulaire ADD / Remove -------------------------- #}
{# A factoriser  modif css #}
    <div class="modal fade" id="add-besoin" tabindex="-1" role="dialog" 
        aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="loginmodal-container">
                <h1>Nouveau besoin</h1><br>
               
                
            </div>
        </div>
    </div>
        
    <div class="modal fade" id="remove-besoin" tabindex="-1" role="dialog" 
        aria-labelledby="myModalLabel" aria-hidden="true" style="display: none;">
        <div class="modal-dialog">
            <div class="loginmodal-container">
                <h1>Supprimer besoin</h1><br>
                <form>

                </form>
            </div>
        </div>
    </div>
{# -------------------------------------------------------------------------- #}      
        
    <br />
{# ----------------------- Liste des besoins -------------------------------- #}   
    <div class="row">
        {{ dump(ia) }}
        {{ dump(besoins) }}
        {{ dump(client) }}
        
        <form>
            <table id="user-list" class="table table-striped table-hover">
                <thead>
                    <tr>
                        <th>Status</th>
                        <th>Priorité</th>
                        <th>Client</th>
                        <th>Type métier</th>
                        <th>Solutions</th>
                        <th></th>
                    </tr>
                </thead>
                <tbody>
                    {% for b in besoins %}
                        {% if b.archive == 0 %}
                            <tr>
                                <td>{{ b.status }}</td>
                                <td>{{ b.priority }}</td>
                                <td>{{ b.client.name }}</td>
                                <td>Info</td>
                                <td>Cédric Durand</td>
                                <td>
                                    <a href="{{ path('easygestion_mesbesoins_edit', {'id': b.id}) }}" class="btn glyphicon glyphicon-wrench"></a>
                                    <a href="{{ path('easygestion_mesbesoins_archive', {'id': b.id}) }}" class="btn glyphicon glyphicon-trash"></a> 
                                </td>
                            </tr>
                        {% endif %}
                    {% endfor %}
                </tbody>
            </table>
        </form>
    </div>
</div>
{% endblock %}

